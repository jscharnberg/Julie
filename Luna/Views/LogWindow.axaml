<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
		Width="1500"
        x:Class="Luna.LogWindow"
		        x:DataType="vm:LogViewModel"
		        xmlns:vm="using:Luna.ViewModels"
        Title="LogWindow">
	<Window.DataContext>
		<vm:LogViewModel/>
	</Window.DataContext>

	<!--"colors": {
  "editor.background": "#002C56",
  "editor.foreground": "#FFFFFF",
  "editorCursor.foreground": "#FC4C02",
  "editor.lineHighlightBackground": "#003A6E",
  "editor.selectionBackground": "#008E97"
}-->


	<DockPanel Background="#121c26">

		<Border DockPanel.Dock="Top" Padding="10" 
        BorderThickness="0,0,0,1" 
        BorderBrush="#1c2630">
    <TextBlock Text="Projektname" Foreground="White" FontWeight="Bold" FontSize="16"/>
</Border>
		<!--<Border DockPanel.Dock="Top" Padding="10" BorderThickness="0,0,0,1" BorderBrush="#1c2630">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
				</Grid.ColumnDefinitions>
				<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
					--><!--<TextBox Width="300" Watermark="Search logs..." Text="{Binding SearchText, Mode=TwoWay}" />--><!--
				</StackPanel>
				<Button Grid.Column="1" Width="32" Height="32" Background="Transparent" BorderBrush="Transparent">
					--><!-- Verwende ein Icon, z.B. FontAwesome oder ein Path --><!--
					<Path Data="M3,0 L3,2 L0,2 L0,0 Z" Fill="White"/>
				</Button>
			</Grid>
		</Border>-->

		<!-- Footer -->
		<Border DockPanel.Dock="Bottom" Padding="10"
                BorderThickness="0,1,0,0"
                BorderBrush="#1c2630">
			<TextBlock Text="{Binding FooterText}" Foreground="White" HorizontalAlignment="Center"/>
		</Border>

		<!-- Toolbar -->

		<!--<StackPanel DockPanel.Dock="Left" Width="150" Margin="0, 10, 0, 0" Spacing="10">
			<Button Content="Load Log"
				Command="{Binding LoadLogsAsync}"
								HorizontalAlignment="Center"
				Background="#1b7784" Foreground="White" Padding="8,4"/>
			<Button Content="Load Log Folder"
								Command="{Binding LoadLogFolderAsync}"
												HorizontalAlignment="Center"
								Background="#1b7784" Foreground="White" Padding="8,4"/>
		</StackPanel>-->
		
		<!-- LEFT SIDEBAR -->
        <StackPanel DockPanel.Dock="Left" Width="200" Margin="0,10,0,0" Spacing="10">
            <Button Content="Load Log" Command="{Binding LoadLogsAsync}" HorizontalAlignment="Center"
                    Background="#1b7784" Foreground="White" Padding="8,4"/>
            <Button Content="Load Log Folder" Command="{Binding LoadLogFolderAsync}" HorizontalAlignment="Center"
                    Background="#1b7784" Foreground="White" Padding="8,4"/>

            <TextBlock Text="Filter Levels:" Foreground="White" FontWeight="Bold" Margin="0,10,0,0"/>

            <!-- LogLevel Filter -->
            <CheckBox Content="INFO" IsChecked="{Binding FilterInfo}" Foreground="White"/>
            <CheckBox Content="WARN" IsChecked="{Binding FilterWarn}" Foreground="White"/>
            <CheckBox Content="ERROR" IsChecked="{Binding FilterError}" Foreground="White"/>
            <CheckBox Content="DEBUG" IsChecked="{Binding FilterDebug}" Foreground="White"/>
        </StackPanel>

		<ListBox ItemsSource="{Binding FilteredLogs}"
			 Background="#0c161f"
			 BorderThickness="1"
			 BorderBrush="#1c2630"
			 ScrollViewer.HorizontalScrollBarVisibility="Disabled"
			 ScrollViewer.VerticalScrollBarVisibility="Auto">

			<ListBox.ItemTemplate>
				<DataTemplate>
					<SelectableTextBlock TextWrapping="Wrap" >
						<!-- Zeile -->
						<Run Text="{Binding Line}" Foreground="#AAAAAA"/>
						<Run Text="  "/>

						<!-- Timestamp -->
						<Run Text="[" Foreground="#1b7784"/>
						<Run Text="{Binding Stamp}" Foreground="#1b7784"/>
						<Run Text="]" Foreground="#1b7784"/>
						<Run Text="  "/>

						<!-- Level -->
						<Run Text="[" Foreground="#e6721d"/>
						<Run Text="{Binding LogType}" Foreground="#e6721d"/>
						<Run Text="]" Foreground="#e6721d"/>
						<Run Text="  "/>

						<!-- File -->
						<Run Text="{Binding File}" Foreground="White"/>
						<Run Text="  "/>

						<!-- Line -->
						<Run Text="{Binding LogLine}" Foreground="White"/>
						<Run Text="  "/>

						<!-- Method -->
						<Run Text="{Binding Method}" Foreground="#FC4C02"/>
						<Run Text="  "/>

						<!-- Message -->
						<Run Text="{Binding Text}" Foreground="White"/>
					</SelectableTextBlock>
				</DataTemplate>
			</ListBox.ItemTemplate>
		</ListBox>

	</DockPanel>

	<!--<DockPanel>
		 Toolbar 
		<StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="5">
			<Button Content="Load Log"
                    Command="{Binding LoadLogsCommand}"
                    CommandParameter="test.log"/>
		</StackPanel>

		 Logs 
		-->
	<!--<DataGrid Items="{Binding Logs}" AutoGenerateColumns="True"/>-->
	<!--
	</DockPanel>-->

</Window>
